// room script file
import function talk(String pito,  bool change);
import function paso(int id1,  int id2);
import function endHablar();
import function interact(int x,  int y, String texto,  Character* personaje);
import function hablar(int id1,  int id2,  int x,  int y);
bool selec=false;
function room_FirstLoad()
{
  cEspejo.Transparency=100;
  gui[2].Visible = true;
  gui[1].Visible = true;
  paso(2, 1);
  talk("Bienvenido a la segunda sala. ", false);
  talk("A lo largo de esta hay repartidos 7 cuadros. ", false);
  talk("Si interactuas con ellos, encontrarás una descripción de cada uno.", false);
  talk("Elige sabiamente cuáles de ellos merecen ser bañados en luz. ", false);
  talk("Ten en cuenta que el tiempo es oro. ", false);
  talk("Estas son las instrucciones: ", false);
  talk("-No dejes que se agote la luz del farol, tienes 3 minutos", false);
  talk("- Tres de los cuadros necesitan luz. Ilumínalos.", false);
  talk("- Nunca tengas miedo de nada.", false);
  endHablar();
}

function room_RepExec()
{ 
if(selec!=true){
object[0].SetPosition(cFaro.x-2048, cFaro.y+2200);
}
else{
    object[0].SetPosition(cJuli.x-2048, cJuli.y+2050);

}
hotspot[11].Enabled=false;
object[1].Visible=false;
if(IsTimerExpired(1)){
  if(intentos>0){
  object[1].Visible=true;
  cJuli.LoseInventory(iFaro);
  talk("¿Y LA LUZ?", true);
  cJuli.ChangeRoom(1);
  cJuli.LoseInventory(iFaro);
  intentos--;
  }
}
}
function room_Load()
{
 aGeneral.Play();
 cReflejo.Transparency=100;
object[1].Visible=false;
if(selec!=true){
object[0].SetPosition(cFaro.x-2048, cFaro.y+2200);
}
else{
    object[0].SetPosition(cJuli.x-2048, cJuli.y+2050);

}
SetTimer(1, 8000);
}
function hHotspot10_WalkOn()
{
cJuli.ChangeRoom(1, 560,  650);
}

function hHotspot8_WalkOn()
{
if (interact(1110, 1608, "Cógelo, compa", cFaro)){
    cJuli.AddInventory(iFaro);
    cFaro.Transparency=100;
    selec=true;
}

}
function hHotspot1_WalkOn()
{
if (interact(cCuadro1.x,cCuadro1.y+10, "Está el dios nórdico ciego Hödr, junto con Odín, su padre. Ambos están en Niflheim, reino de las tinieblas.",cCuadro1)){
     if(contador<3){
            talk("¿Ilumino este cuadro?", true);

       dDialog4.Start();
     } else
     {
        talk("Ya he iluminado 3 cuadros", true);

}
 }
}
function hHotspot2_WalkOn()
{
 if (interact(cCuadro2.x,cCuadro2.y+10, "Una mujer con los ojos vendados está sumergida en el agua, hundiéndose poco a poco.",cCuadro2)){
     if(contador<3){
            talk("¿Ilumino este cuadro?", true);

       dDialog2.Start();
     } else
     {
        talk("Ya he iluminado 3 cuadros", true);

}
 }
}


function hHotspot3_WalkOn()
{
 if (interact(cCuadro3.x,cCuadro3.y+10, "Un cuadro del amanecer.Falta el sol.",cCuadro3)){
     if(contador<3){
            talk("¿Ilumino este cuadro?", true);

       dDialog5.Start();
     } else
     {
        talk("Ya he iluminado 3 cuadros", true);

}
 }
}
 

function hHotspot4_WalkOn()
{
if (interact(cCuadro4.x,cCuadro4.y+10, "Un apuesto hombre escuchando música en un banco, a mediodía.",cCuadro4)){
     if(contador<3){
            talk("¿Ilumino este cuadro?", true);

       dDialog2.Start();
     } else
     {
        talk("Ya he iluminado 3 cuadros", true);

}
 }
}

function hHotspot5_WalkOn()
{
if (interact(cCuadro5.x,cCuadro5.y+10,  "Un muchacho en la cama arropado, a oscuras.",cCuadro5)){
     if(contador<3){
            talk("¿Ilumino este cuadro?", true);

       dDialog2.Start();
     } else
     {
        talk("Ya he iluminado 3 cuadros", true);

}
 }
}

function hHotspot6_WalkOn()
{
if (interact(cCuadro6.x,cCuadro6.y+10,  "La Virgen María, con una aureola sobre su cabeza. ",cCuadro6)){
     if(contador<3){
            talk("¿Ilumino este cuadro?", true);

       dDialog6.Start();
     } else
     {
        talk("Ya he iluminado 3 cuadros", true);

}
 }
}
function hHotspot7_WalkOn()
{
if (interact(cCuadro7.x,cCuadro7.y+10, "Un murciélago en una oscura cueva.",cCuadro7)){
     if(contador<3){
            talk("¿Ilumino este cuadro?", true);

       dDialog2.Start();
     } else
     {
        talk("Ya he iluminado 3 cuadros", true);

}
 }
}


function hHotspot9_WalkOn()
{
 if (interact(860, 612, "¿Qué es esto?",cEspejo)){
   gui[1].Visible=false;
   object[0].Visible=false;
   cReflejo.Transparency=0;
   Wait(10);
   talk("¿Este soy yo?",false);
   talk("AAAAAAAAH, ME VOY PITANDO", false);
   dDialog7.Start();
   
     
}
}


function room_Leave()
{
  aGeneral.Stop();

}
